var map =  [[1,0,0,2,2,0], 
            [0,0,2,1,0,2], 
            [0,1,1,2,2,2], 
            [1,2,1,0,2,1]];
console.log(lp(map));
function lp(e){var t=0,c=e.length,h=e[0]?e[0].length:0;for(r=0;r<c;r++)for(l=0;l<h;l++){var n=e[r][l],k=cn(e,r,l,e[r][l],0);k>t&&(t=k,n)}return t}function cn(e,l,t,r,c){return e[l][t]<0?c:(e[l][t]==r&&(c++,e[l][t]=-1*r,0==e[l][t]&&(e[l][t]=-9),t<e[0].length-1&&(c=cn(e,l,t+1,r,c)),t>0&&(c=cn(e,l,t-1,r,c)),l<e.length-1&&(c=cn(e,l+1,t,r,c)),l>0&&(c=cn(e,l-1,t,r,c))),c)}